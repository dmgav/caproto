

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Release History &mdash; caproto 0.2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="References" href="references.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> caproto
          

          
          </a>

          
            
            
              <div class="version">
                0.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install Caproto</a></li>
</ul>
<p class="caption"><span class="caption-text">EPICS Clients and Servers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="command-line-client.html">Command-Line Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="sync-client.html">Synchronous Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="threading-client.html">Threading Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyepics-compat-client.html">Pyepics-Compatible Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="async-clients.html">Asynchronous Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="iocs.html">Input-Output Controllers (IOCs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="mock-records.html">Mock Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="servers.html">Servers</a></li>
</ul>
<p class="caption"><span class="caption-text">Channel Access Sans I/O</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Writing Your Own Channel Access Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Core API Documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://nsls-ii.github.io/caproto/bench/#/">Performance Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="protocol-compliance.html">Details of our Protocol Compliance for CA Nerds</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Release History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#v0-2-0-2018-10-17">v0.2.0 (2018-10-17)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#breaking-changes">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#improved-protocol-compliance">Improved Protocol Compliance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v0-1-2-2018-08-31">v0.1.2 (2018-08-31)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-1-1-2018-06-17">v0.1.1 (2018-06-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-1-0-2018-06-14">v0.1.0 (2018-06-14)</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">caproto</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Release History</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/release-notes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="release-history">
<h1>Release History<a class="headerlink" href="#release-history" title="Permalink to this headline">¶</a></h1>
<div class="section" id="v0-2-0-2018-10-17">
<h2>v0.2.0 (2018-10-17)<a class="headerlink" href="#v0-2-0-2018-10-17" title="Permalink to this headline">¶</a></h2>
<p>This release improves compliance with the protocol and server performance under
high load.</p>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Under high load (with many subscription updates queued up to send) servers
batch subscriptions into blocks, trading a little latency for efficiency.
Under low load, servers prioritize low latency.</li>
<li>The servers’ medium-verbose setting (<code class="docutils literal notranslate"><span class="pre">-v</span></code>) displays current load and
latency.</li>
<li>In the threading client, process user callbacks using one threadpool <em>per
circuit</em> instead of one threadpool for the entire context. Make the size of
the threadpool configurable via a new
<a class="reference internal" href="threading-client.html#caproto.threading.client.Context" title="caproto.threading.client.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a> parameter, <code class="docutils literal notranslate"><span class="pre">max_workers</span></code>.</li>
<li>We now test the servers against a
<a class="reference external" href="https://github.com/klauer/catvs/tree/py3k">Python 3-compatible fork</a> of
Michael Davidsaver’s utility for testing Channel Access servers,
<a class="reference external" href="https://github.com/mdavidsaver/catvs">catvs</a>. This has generated several
fixes improving protocol compliance, list a section below. There are a small
number of known failures wherein the best/correct behavior is arguable; see
<a class="reference external" href="https://github.com/NSLS-II/caproto/pull/327">caproto#327 on GitHub</a> for
discussion. There may be more progress on these in future releases of
caproto.</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">pvproperty.scan</span></code>. See
the <a class="reference external" href="https://github.com/NSLS-II/caproto/blob/master/caproto/ioc_examples/mini_beamline.py">mini_beamline example IOC</a>
for a usage example.</li>
<li>Add a server-side data source for <code class="docutils literal notranslate"><span class="pre">ChannelType.INT</span></code> (a.k.a SHORT) data.</li>
<li>The default printed output of the <code class="docutils literal notranslate"><span class="pre">caproto-monitor</span></code> CLI utility now
includes microseconds.</li>
<li>There are several new <a class="reference external" href="https://github.com/NSLS-II/caproto/tree/master/caproto/ioc_examples">IOC examples</a>.</li>
</ul>
</div>
<div class="section" id="breaking-changes">
<h3>Breaking Changes<a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The expected signature of the <code class="docutils literal notranslate"><span class="pre">access_rights_callback</span></code> passed to
<a class="reference internal" href="threading-client.html#caproto.threading.client.Context" title="caproto.threading.client.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a> has been changed from
<code class="docutils literal notranslate"><span class="pre">f(access_rights)</span></code> to <code class="docutils literal notranslate"><span class="pre">f(pv,</span> <span class="pre">access_rights)</span></code>. This makes it consistent
with the <code class="docutils literal notranslate"><span class="pre">connection_callback</span></code>.</li>
<li>If a beacon fails to send, do not kill the server; just log the failure,
along with a suggestion on how to fix the environment to omit the failed
address, and continue to run.</li>
<li>In the high-level server, implemented with <code class="docutils literal notranslate"><span class="pre">pvproperty</span></code>, PV values can be
defined as scalars. The accessor <code class="docutils literal notranslate"><span class="pre">pvproperty.value</span></code> now returns a scalar
instead of a length-1 list (API break), while <code class="docutils literal notranslate"><span class="pre">write()</span></code> accepts either list
or scalar.</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h3>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The asyncio server now executes its cleanup code when interrupted with SIGINT
(Ctrl+C).</li>
<li>All three servers were relying on the operating system to clean up their
sockets when the process exited. They now close their sockets explicitly when
the server task exits. This fixes the runaway usage of file descriptors when
the tests are run.</li>
</ul>
</div>
<div class="section" id="improved-protocol-compliance">
<h3>Improved Protocol Compliance<a class="headerlink" href="#improved-protocol-compliance" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The servers send <a class="reference internal" href="api.html#caproto.CreateChFailResponse" title="caproto.CreateChFailResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">CreateChFailResponse</span></code></a> when the client
requests a channel name that does not exist on the server. They previously
did not respond.</li>
<li>The servers reply to <a class="reference internal" href="api.html#caproto.SearchRequest" title="caproto.SearchRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchRequest</span></code></a> messages sent over TCP.
(UDP is more common, but TCP is allowed.) They previously did not respond.</li>
<li>The <a class="reference internal" href="api.html#caproto.EventCancelResponse" title="caproto.EventCancelResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">EventCancelResponse</span></code></a> message includes a <code class="docutils literal notranslate"><span class="pre">data_count</span></code>.</li>
<li>The servers respect the <code class="docutils literal notranslate"><span class="pre">data_count</span></code> requested by the client.</li>
<li>Servers enforce quota per subscription to avoid one prolific subscription (or
slow client) from drowning out others.</li>
<li>Servers respect <code class="docutils literal notranslate"><span class="pre">EventsOn</span></code> and <code class="docutils literal notranslate"><span class="pre">EventsOff</span></code> requests.</li>
<li>Servers differentiate between <em>current</em> length and <em>maximum</em> length of an
array, and they properly declare the <em>maximum</em> length in
<code class="xref py py-class docutils literal notranslate"><span class="pre">CreateChanResponse</span></code>. They formerly declared the <em>current</em>
length, which was not correct.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">caproto-put</span></code> commandline utility now supports <code class="docutils literal notranslate"><span class="pre">-a</span></code> for arrays.</li>
</ul>
</div>
</div>
<div class="section" id="v0-1-2-2018-08-31">
<h2>v0.1.2 (2018-08-31)<a class="headerlink" href="#v0-1-2-2018-08-31" title="Permalink to this headline">¶</a></h2>
<p>This is a bug-fix release fixing some critical bugs. We recommend that all
users ugprade.</p>
<ul class="simple">
<li>Fix critical typo in threading client’s search functionality that could cause
it to conflate addresses from different search responses and then attempt to
connect to the wrong server.</li>
<li>Fix handshake with servers and clients speaking Version 11 (or older) of the
protocol.</li>
</ul>
</div>
<div class="section" id="v0-1-1-2018-06-17">
<h2>v0.1.1 (2018-06-17)<a class="headerlink" href="#v0-1-1-2018-06-17" title="Permalink to this headline">¶</a></h2>
<p>This is a bug-fix release following closely on the initial release. We
recommend that all users update.</p>
<ul class="simple">
<li>Fix straightforward but important bug in the synchronous client that broke
monitoring of multiple channels concurrently.</li>
<li>In servers, abide by the spec’s recommendation that beacons should be issued
quickly at startup before backing off to a slower, steady rate.</li>
<li>Fix a bug that broke the array (“arr”) channel filter if numpy was not
installed.</li>
<li>Add a new section to the documentation detailing caproto’s compliance with
the Channel Access protocol and the feature parity of caproto’s clients and
servers with respect to the reference implementations in epics-base.</li>
</ul>
</div>
<div class="section" id="v0-1-0-2018-06-14">
<h2>v0.1.0 (2018-06-14)<a class="headerlink" href="#v0-1-0-2018-06-14" title="Permalink to this headline">¶</a></h2>
<p>This initial release contains some fairly stable components and some very
experimental ones.</p>
<ul class="simple">
<li>The core protocol code, the synchronous client, the threading client, and the
pyepics-compatible client are fairly stable.</li>
<li>The high-level interface to IOCs has no known issues but could in a future
release of caproto, as we gain experience from its use.</li>
<li>The three server implementations are thoroughly tested, but their low level
API is likely to change in a future release.</li>
<li>The asynchronous client implementations (trio client and curio client) are
highly experimental. They lack feature-parity with the other clients and have
some known bugs. They may be heavily revised or removed in a future release
of caproto.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="references.html" class="btn btn-neutral" title="References" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Daniel Allan

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>